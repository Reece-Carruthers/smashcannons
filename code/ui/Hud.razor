@using Sandbox;
@using Sandbox.UI

@inherits PanelComponent

<root class="@( !Network.IsProxy ? "" : "hidden" )">
	<RoundDisplay></RoundDisplay>
</root>

    @if (IsEndState())
    {
        <RoundEndDisplay></RoundEndDisplay>
    }

@code
{
	SmashRunnerMovement LocalPlayer { get; set; }

	protected override void OnFixedUpdate()
	{
		if ( !LocalPlayer.IsValid() )
		{
			LocalPlayer = Scene.GetAllComponents<SmashRunnerMovement>().FirstOrDefault( p => p.Network.OwnerConnection == Connection.Local );
		}
	}

	protected override int BuildHash() => System.HashCode.Combine(Network.IsProxy, StateSystem.Active?.GetType());

    private bool IsEndState()
    {
        return StateSystem.Active is EndState;
    }
}
